# 첫번째 삽질

처음 문제를 보고 그냥 for 문 돌리면 되는거 아닌가 싶었음. 게다가 첫번째 문제는 코드도 거의 완성되어 왔기 때문에 뭘 하라는거지? 라는 생각을 함.  

그리고 문제를 커서에 붙여넣고 에이전트에게 코딩해 달라고 했더니 코드를 완성해 버림. 그런데... 이게 문제였음.  

아직 커서를 아주 잘 다루지 못해 이런 저런 다양한 삽질들을 하고 있는 과정이었기 때문에 룰 세팅이나 MCP 설정들도 아직 잘 되어 있지 않은 상황에서 그냥 하다보니 폴더 구조부터 코딩 스타일 등이 맘에들지 않음.  

그래서 과거에 토이 프로젝트로 했던 git repository를 열어 에이전트에게 이 프로젝트의 코드를 기반으로 커서 룰을 작성해 달라고 함.  

놀랍게도 상당히 잘 작성해 줌. 그런데... 뭔가 아쉬웠음....

다시 검색과 유튜브 시청을 통해 다른 사람들이 잘 작성해 놓은 룰이 있는 것을 발견함.

- [커서 룰 Repo](https://github.com/PatrickJS/awesome-cursorrules?tab=readme-ov-file)

여기를 이것 저것 뒤져 에이전트에게 던져주고 다시 내 코드를 기반으로 룰을 작성해 달라고 함.

와..... AI 진짜 미쳤음... 거의 내가 원하는 룰을 잘 작성해 줌... 내가 스스로 했다면 이것보단 못 했을거라 생각함.

그런데 또 뭔가... 마음에 안들었음. 이유는 룰을 언어와 프레임워크, 프로젝트별로 나눠서 범용적으로 사용하고, 재활용 가능하게 하고 싶었음.

그래서 python(삽질 과정 중 자바도 해봄), FastAPI, 프로젝트 단위로 룰을 세분화 함.

여기엔 아래의 룰만 적용함.

- [python rule](.cursor/rules/python-common.mdc)
- [project rule](.cursor/rules/project.mdc)

그리고 다시 에이전트에게 일을 시킴. 일해라 AI!

그래서 새로 만들어진 코드는 상당히 마음에 들었음. 그런데 문제는... 크롤링이 안됨... 아마도 방어 로직에 의해 실패하는 것으로 보임.

그런데 이걸 해결하려고 했던 것이 가장 큰 삽질이었음.

주어진 문제는 크롤링을 실제로 해서 조회수를 가져오는 문제도 있었지만 그냥 for 문 돌려서 response를 가져오면 단순한 문제도 있었는데 둘 다 크롤링에 집중해 버림.

그리고 또 selenium과 proxy는 사용하지 말라는 제약을 나중에 봄.... OTL

아............. 이걸 왜 이틀이나 삽질하고 알았는지......

지금 이 글을 쓰고 있는 시점에서 알아차리고 이제 다시 원점으로 돌아가 코딩을 해야 함. ㅠㅠ

아! 그리고 하나 빼먹었는데 AI가 짜준 코드는 완벽하지 않아 이런 저런 작업을 추가로 더 하긴 했었음.

예를들면 문제로 주어진 URL과 크롤링 시 필요한 여러 설정들을 yaml 파일로 따로 빼도록 한 것.

의존성을 poetry로 관리하도록 변경한 것.

옛날에 작성한 코드들이 부끄러워(내가 짠 과거의 코드들은 다 왜 이리 부끄러운건지...) 깃헙에 공개하지 못하고 있었는데 앞으로 하게 될 과제들은 공개해 보려고 마음먹고 나름 기록을 하고 있음.

## 두번째 삽질

일단 기존에 작성한 코드들을 v1 폴더로 옮긴 후 v2 폴더를 만들어 새로 작성함.

첫번째 문제의 경우 for문만 제대로 돌리면 되는 것으로 이해 해서 논리적인 오류를 해결하는 걸 먼저 하려고 함.

### 첫번째 문제

일단 주어진 코드가 while 문을 통해 5번 반복 하도록 되어 있었음.

개인적으로 이런 코드를 선호하지 않음. 이유는 반복의 횟수나 상태가 명확하지 않아 오류를 양산하기 좋은 방식임.

for 문으로 변경하여 실행하도록 함. 그런데.... url을 1번 호출한 후 무한 대기하는 문제가 있음.

이건 뭐 while 수정한건 상관없이 무한 대기 함... 타임 아웃 설정을 통해 무한 대기하지 않도록 수정함.

일단 문제 자체가 크롤링에 성공하는 것이 아니라 반복만 제대로 되게 만들면 되는 것이라고 생각해 여기서 더 이상 손대지 않기로 함.

어차피 크롤링은 2번 문제가 있으니...